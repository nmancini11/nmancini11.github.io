function fixMiCharts(){var t=d3.select("#mainbarchart").select("svg"),e=d3.select("#sidechart").select("svg");t.empty()&&e.empty()||(t.remove(),e.remove()),d3.csv("data/runandgun.csv").row(function(t){return{skater:t.skater,stance:t.stance,dismounts:t.dismounts,timeBetweenTricks:t.timeBetweenTricks.split(","),tricks:t.tricks.split(" || ")}}).get(function(t,e){function a(t){return function(e){var a=d3.interpolate(e.endAngle,t);return function(t){return e.endAngle=a(t),k(e)}}}for(var r=0;r<e.length;r++)e[r].timeBetweenTricks.length!==e[r].tricks.length?console.log(e[r].skater+" is fucked up. # Timestamps: "+e[r].timeBetweenTricks.length+" # Tricks: "+e[r].tricks.length):console.log("every trick has a timestamp, noice!");var n=document.getElementById("mainbarchart").offsetWidth,s=d3.max(e,function(t){return t.tricks.length}),i={left:130,right:8,top:10,bottom:0},d=d3.scaleSequential(d3.interpolateViridis).domain([0,10]),l=d3.scaleLinear().domain([0,s]).range([0,n-i.right-i.left]),c=d3.axisBottom(l),o=d3.select("#mainbarchart").append("svg").attr("height","100%").attr("width","100%").classed("svg-content-responsive",!0),p=o.append("g").attr("transform","translate("+i.left+","+i.top+")");e.forEach(function(t){p.append("text").attr("class","line-label").attr("id",t.skater.replace(/ /g,"")).attr("y",8+35*e.indexOf(t)).attr("x",-110).transition().ease(d3.easeCubic).duration(1e3).delay(150).attr("x",-130).attr("class","skater").attr("color",d(e.indexOf(t))).text(t.skater),p.append("rect").attr("class","rect").attr("y",35*e.indexOf(t)).attr("x","0").attr("height","5").transition().ease(d3.easeCubic).duration(1e3).delay(150).attr("width",t.tricks.length/s*(n-i.right-i.left)).attr("fill",d(e.indexOf(t)))}),p.append("g").attr("class","x axis").attr("transform","translate(0,380)").call(c);var g=2*Math.PI,m=d3.select("#sidechart").append("svg").classed("svg-content-responsive",!0),h=document.getElementById("sidechart").offsetWidth,f=document.getElementById("sidechart").offsetHeight,u=m.append("g").attr("transform","translate("+h/1.9+","+f/2+")"),k=d3.arc().innerRadius(h/3.1).outerRadius(h/3.1+10).startAngle(0);m.append("text").attr("class","line-label").attr("y",f/1.78).attr("x",h/2.53).text("seconds"),m.append("text").attr("class","line-label").attr("y",f/2).attr("x",h/2.3).style("font-size","36px").text(Math.round(d3.sum(e[skaterIndex].timeBetweenTricks)+1.5)),u.append("path").datum({endAngle:g}).style("fill","#ddd").attr("d",k);var x=u.append("path").style("fill","#44bf70").datum({endAngle:0}).attr("d",k)})}var selectedSkater="EvanSmith",skaterIndex=[3],skaterString="Evan Smith";fixMiCharts();